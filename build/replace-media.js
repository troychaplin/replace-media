(()=>{"use strict";const e=window.wp.i18n,t=window.wp.data;document.addEventListener("DOMContentLoaded",(function(){function a(){document.querySelectorAll(".replace-media-button").forEach((e=>{e.removeEventListener("click",n),e.addEventListener("click",n)}))}function n(a){a.preventDefault();const n=this.getAttribute("data-attachment-id");if(!n)return;const i=document.createElement("input");i.type="file",i.style.display="none",document.body.appendChild(i),i.addEventListener("change",(function(){if(0===this.files.length)return;const a=new FormData;a.append("action","replace_media_file"),a.append("nonce",window.replaceMediaData.nonce),a.append("attachment_id",n),a.append("replacement_file",this.files[0]);const c=document.querySelector(`.replace-media-button[data-attachment-id="${n}"]`);c&&(c.disabled=!0,c.textContent=(0,e.__)("Replacingâ€¦","replace-media")),fetch(window.replaceMediaData.ajaxUrl,{method:"POST",body:a,credentials:"same-origin"}).then((e=>{if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);return e.json()})).then((a=>{if(a.success)window.location.reload();else{const n=a.data||(0,e.__)("Error replacing file.","replace-media");(0,t.dispatch)("core/notices").createErrorNotice(n),c&&(c.disabled=!1,c.textContent=(0,e.__)("Replace File","replace-media"))}})).catch((a=>{(0,t.dispatch)("core/notices").createErrorNotice((0,e.__)("Error replacing file:","replace-media")+a.message),c&&(c.disabled=!1,c.textContent=(0,e.__)("Replace File","replace-media"))})),document.body.removeChild(i)})),i.click()}void 0!==window.replaceMediaData&&(a(),wp.media&&wp.media.frame&&wp.media.frame.on("open",a),document.addEventListener("click",(function(e){e.target&&e.target.classList.contains("attachment-details")&&a()})))}))})();